<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">

  <!--
    Klar og kontekstspecifik titel
    â†’ Nielsen: Match between system and the real world
  -->
  <title>Campus | Rooms</title>

  <!-- Theme -->
  <link rel="stylesheet" href="./css/style.css">

  <!-- Vue + Axios -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <style>
    .qr-section {
      /*
        QR-relaterede elementer er samlet
        â†’ Gestalt: Common region
      */
      margin-top: 15px;
      text-align: center;
    }

    .qr-actions {
      /*
        Knapper med samme funktion placeres tÃ¦t
        â†’ Gestalt: NÃ¦rhed (proximity)
      */
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }

    .issue-image {
      /*
        QR-kode er tydeligt klikbart fokuspunkt
        â†’ Gestalt: Fokus (focal point)
      */
      max-width: 180px;
      border-radius: 10px;
      margin-top: 8px;
    }

    .primary-btn.secondary {
      background: #eee;
      color: #111;
    }

    .primary-btn.danger {
      background: #c62828;
    }
  </style>
</head>
<body>

<!--
  Genkendelig header pÃ¥ tvÃ¦rs af systemet
  â†’ Nielsen: Consistency and standards
-->
<header class="topbar">
  <div class="logo">Campus</div>
  <nav>
    <!--
      Aktiv side er markeret
      â†’ Nielsen: Visibility of system status
    -->
    <a class="active" href="rooms.html">Rooms</a>
    <a href="issues.html">Issues</a>
    <a href="admin.html">Admin</a>
  </nav>
</header>

<main class="container">

  <!--
    Klar sideoverskrift
    â†’ Nielsen: Visibility of system status
  -->
  <h1>Rooms</h1>

  <div id="app">

    <!--
      Rooms vises som kort
      â†’ Gestalt: Ensartethed (similarity)
      â†’ Hvert room opfattes som Ã©n samlet enhed
    -->
    <div class="card-grid" v-if="rooms.length">
      <div class="card" v-for="room in rooms" :key="room.roomId">

        <h2>{{ room.roomName }}</h2>

        <!--
          Relateret information grupperet
          â†’ Gestalt: NÃ¦rhed
        -->
        <p><strong>Bygning:</strong> {{ room.building }}</p>
        <p><strong>Room ID:</strong> {{ room.roomId }}</p>

        <!--
          QR-kode vises direkte i kontekst
          â†’ Nielsen: Recognition rather than recall
          â†’ Brugeren skal ikke huske eller slÃ¥ noget op
        -->
        <div class="qr-section">
          <p class="muted"><strong>QR-kode</strong></p>

          <img
            :src="getQrImageUrl(room.roomId)"
            class="issue-image"
            alt="QR kode"
          >

          <!--
            Handlinger relateret til QR-koden
            â†’ Nielsen: Flexibility and efficiency of use
          -->
          <div class="qr-actions">
            <button class="primary-btn" @click="downloadQr(room.roomId)">
              â¬‡ Download QR
            </button>

            <button class="primary-btn secondary" @click="printQr(room.roomId)">
              ðŸ–¨ Print QR
            </button>
          </div>
        </div>

        <!--
          Destruktiv handling er tydeligt markeret
          â†’ Nielsen: User control and freedom
        -->
        <button class="primary-btn danger" @click="deleteRoom(room.roomId)">
          ðŸ—‘ Slet
        </button>
      </div>
    </div>

    <!--
      Tom-/fejltilstand kommunikeres klart
      â†’ Nielsen: Help users recognize and diagnose errors
    -->
    <p v-if="error" class="error">{{ error }}</p>

  </div>
</main>

<script src="./rooms.js"></script>
</body>
</html>
